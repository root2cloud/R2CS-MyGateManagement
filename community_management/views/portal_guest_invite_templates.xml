<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Main page - Create + List -->
    <template id="portal_guest_invite_list" name="Guest Invites Portal List">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs" t-value="'My Guest Invites', '/my/guest/invites'"/>

            <!-- Page-level styles -->
            <t t-set="head">
                <style>
                    body {
                        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
                        min-height: 100vh;
                    }
                    .gi-wrapper {
                        max-width: 650px;
                        margin: 0 auto;
                        padding: 1rem;
                    }
                    .gi-card {
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
                        overflow: hidden;
                        margin-bottom: 2rem;
                    }
                    .gi-card-header {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        color: white;
                        padding: 1.5rem 1.5rem 0.5rem 1.5rem;
                        border-bottom: none;
                    }
                    .gi-title {
                        font-weight: 600;
                        font-size: 1.25rem;
                        color: white;
                        margin: 0 0 1rem 0;
                    }
                    .gi-tabs {
                        border-bottom: none;
                    }
                    .gi-tabs .nav-link {
                        border: 2px solid rgba(255, 255, 255, 0.3);
                        border-radius: 8px;
                        padding: 0.5rem 1.25rem;
                        font-weight: 500;
                        color: rgba(255, 255, 255, 0.9);
                        background: transparent;
                        margin-right: 0.75rem;
                        transition: all 0.3s ease;
                    }
                    .gi-tabs .nav-link.active {
                        background: rgba(255, 255, 255, 0.2);
                        color: white;
                        border-color: white;
                        box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
                    }
                    .gi-tabs .nav-link:hover:not(.active) {
                        background: rgba(255, 255, 255, 0.1);
                        border-color: rgba(255, 255, 255, 0.5);
                    }
                    .gi-label {
                        font-size: 14px;
                        color: #4a5568;
                        font-weight: 600;
                        margin-bottom: 0.5rem;
                        display: flex;
                        align-items: center;
                    }
                    .gi-label:before {
                        content: 'â€¢';
                        color: #2a5298;
                        margin-right: 6px;
                        font-weight: bold;
                    }
                    .gi-field {
                        border-radius: 8px;
                        border: 2px solid #e2e8f0;
                        font-size: 15px;
                        padding: 0.75rem 1rem;
                        background: #f8fafc;
                        transition: all 0.3s ease;
                    }
                    .gi-field:focus {
                        border-color: #2a5298;
                        box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
                        background: white;
                        transform: translateY(-1px);
                    }
                    .gi-btn-primary {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        border: none;
                        color: white;
                        font-weight: 600;
                        border-radius: 8px;
                        padding: 0.875rem 1.5rem;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3);
                    }
                    .gi-btn-primary:hover {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(42, 82, 152, 0.4);
                    }
                    .gi-pill-group .btn {
                        border-radius: 8px !important;
                        border: 2px solid #e2e8f0;
                        color: #4a5568;
                        font-size: 14px;
                        padding: 0.5rem 1rem;
                        background: white;
                        transition: all 0.3s ease;
                    }
                    .gi-pill-group .btn-check:checked + .btn {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        color: white;
                        border-color: transparent;
                        box-shadow: 0 4px 10px rgba(42, 82, 152, 0.3);
                    }
                    .gi-list-card {
                        border-radius: 10px;
                        border: 2px solid #e2e8f0;
                        background: white;
                        transition: all 0.3s ease;
                        position: relative;
                        overflow: hidden;
                    }
                    .gi-list-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
                        border-color: #2a5298;
                    }
                    .gi-list-card:before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 4px;
                        background: linear-gradient(90deg, #2a5298, #1e3c72);
                    }
                    .gi-badge {
                        border-radius: 20px;
                        font-size: 12px;
                        padding: 0.25rem 0.75rem;
                        font-weight: 500;
                    }
                    .whatsapp-share {
                        background: linear-gradient(135deg, #25D366 0%, #128C7E 100%) !important;
                        color: white !important;
                        border: none !important;
                        border-radius: 8px !important;
                        font-weight: 600;
                        padding: 0.875rem 1.5rem;
                        font-size: 15px;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
                    }
                    .whatsapp-share:hover {
                        background: linear-gradient(135deg, #20BA5A 0%, #0F8C6A 100%) !important;
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
                        color: white !important;
                    }
                    .form-check-input:checked {
                        background-color: #2a5298;
                        border-color: #2a5298;
                    }
                    .text-muted {
                        color: #718096 !important;
                        font-size: 13px;
                    }
                    .border {
                        border: 2px solid #e2e8f0 !important;
                        border-radius: 10px;
                    }
                    .rounded-3 {
                        border-radius: 10px !important;
                    }
                    .bg-white {
                        background-color: white !important;
                    }
                    .private-entry-section {
                        background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
                        border: 2px solid #ffd54f;
                    }
                    .invitations-header {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        color: white;
                        padding: 1rem 1.5rem;
                        border-radius: 10px;
                        margin-bottom: 1.5rem;
                    }
                    .empty-state {
                        background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
                        border: 2px dashed #cbd5e0;
                        border-radius: 10px;
                        padding: 3rem 2rem;
                        text-align: center;
                    }
                    .guest-badge {
                        background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
                        color: white;
                        border-radius: 20px;
                        padding: 0.25rem 0.75rem;
                        margin: 0.25rem;
                        display: inline-block;
                        font-size: 12px;
                        font-weight: 500;
                    }
                </style>
            </t>

            <div class="container mt-4 gi-wrapper">
                <!-- Create card -->
                <div class="card gi-card">
                    <div class="gi-card-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="gi-title">Create Guest Invitation</div>
                        </div>
                        <ul class="nav nav-tabs gi-tabs mt-2" id="inviteTab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="once-tab" data-bs-toggle="tab" href="#once-pane"
                                   role="tab" aria-controls="once-pane" aria-selected="true">
                                    <i class="fa fa-calendar-day me-2"></i>Single Visit
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="freq-tab" data-bs-toggle="tab" href="#freq-pane" role="tab"
                                   aria-controls="freq-pane" aria-selected="false">
                                    <i class="fa fa-calendar-week me-2"></i>Recurring Visit
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body pt-3" style="padding: 1.5rem;">
                        <div class="tab-content" id="inviteTabContent">
                            <!-- Once tab -->
                            <div class="tab-pane fade show active" id="once-pane" role="tabpanel"
                                 aria-labelledby="once-tab">
                                <form method="POST" action="/my/guest/invites">
                                    <input type="hidden" name="invitetype" value="once"/>
                                    <div class="border rounded-3 p-3 mb-4 private-entry-section">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="isprivate"
                                                   id="onceprivate"/>
                                            <label class="form-check-label fw-semibold" for="onceprivate">
                                                <i class="fa fa-eye-slash me-2"></i>Private Entry
                                            </label>
                                        </div>
                                        <div class="text-muted small mt-2 ps-4">
                                            Guest will enter discreetly without notification to others.
                                        </div>
                                    </div>
                                    <div class="mb-4">
                                        <label class="gi-label">Visit Date</label>
                                        <input type="date" name="oncedate" class="form-control gi-field"
                                               required="required"/>
                                    </div>
                                    <div class="row mb-4">
                                        <div class="col-md-6 mb-3">
                                            <label class="gi-label">Start Time</label>
                                            <input type="time" name="oncestarttime" class="form-control gi-field"/>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="gi-label">Duration</label>
                                            <select name="oncevalidhours" class="form-select gi-field">
                                                <option value="2">2 Hours</option>
                                                <option value="4">4 Hours</option>
                                                <option value="8" selected="selected">8 Hours</option>
                                                <option value="12">12 Hours</option>
                                                <option value="24">24 Hours</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="gi-label">Guest Name</label>
                                        <input type="text" name="guestname" class="form-control gi-field"
                                               required="required" placeholder="Enter guest's full name"/>
                                    </div>
                                    <div class="mb-4">
                                        <label class="gi-label">Guest Mobile Number</label>
                                        <input type="text" name="guestmobile" class="form-control gi-field"
                                               required="required" placeholder="Enter mobile number"/>
                                    </div>
                                    <div class="mb-4">
                                        <label class="gi-label">Additional Notes (Optional)</label>
                                        <textarea name="note" class="form-control gi-field" rows="3"
                                                  placeholder="Add any special instructions or notes for security..."></textarea>
                                    </div>
                                    <button type="submit" class="btn gi-btn-primary w-100 py-3">
                                        <i class="fa fa-paper-plane me-2"></i>Create Invitation
                                    </button>
                                </form>
                            </div>

                            <!-- Frequently tab -->
                            <div class="tab-pane fade" id="freq-pane" role="tabpanel" aria-labelledby="freq-tab">
                                <form method="POST" action="/my/guest/invites">
                                    <input type="hidden" name="invitetype" value="frequent"/>
                                    <div class="mb-4">
                                        <label class="gi-label">Access Duration</label>
                                        <div class="btn-group gi-pill-group w-100" role="group">
                                            <input type="radio" class="btn-check" name="durationtype" id="freq1w"
                                                   value="1w" autocomplete="off"/>
                                            <label class="btn btn-outline-primary" for="freq1w">1 Week</label>
                                            <input type="radio" class="btn-check" name="durationtype" id="freq1m"
                                                   value="1m" autocomplete="off" checked="checked"/>
                                            <label class="btn btn-outline-primary" for="freq1m">1 Month</label>
                                            <input type="radio" class="btn-check" name="durationtype" id="freqgt1m"
                                                   value="gt1m" autocomplete="off"/>
                                            <label class="btn btn-outline-primary" for="freqgt1m">Custom</label>
                                        </div>
                                    </div>
                                    <div class="row mb-4">
                                        <div class="col-md-6 mb-3">
                                            <label class="gi-label">Start Date</label>
                                            <input type="date" name="freqstartdate" class="form-control gi-field"/>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="gi-label">End Date (Optional)</label>
                                            <input type="date" name="freqenddate" class="form-control gi-field"/>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="gi-label">Guest Name</label>
                                        <input type="text" name="guestname" class="form-control gi-field"
                                               required="required" placeholder="Enter guest's full name"/>
                                    </div>
                                    <div class="mb-4">
                                        <label class="gi-label">Guest Mobile Number</label>
                                        <input type="text" name="guestmobile" class="form-control gi-field"
                                               required="required" placeholder="Enter mobile number"/>
                                    </div>
                                    <div class="mb-4">
                                        <label class="gi-label">Additional Notes (Optional)</label>
                                        <textarea name="note" class="form-control gi-field" rows="3"
                                                  placeholder="Add any special instructions or notes for security..."></textarea>
                                    </div>
                                    <button type="submit" class="btn gi-btn-primary w-100 py-3">
                                        <i class="fa fa-paper-plane me-2"></i>Create Invitation
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Existing invites list -->
                <div class="mt-5">
                    <div class="invitations-header">
                        <h5 class="mb-0">
                            <i class="fa fa-list me-2"></i>Your Invitations
                            <span class="badge bg-light text-dark ms-2" style="background: rgba(255,255,255,0.2) !important;">
                                <t t-esc="len(invites) or 0"/>
                            </span>
                        </h5>
                    </div>

                    <t t-if="invites">
                        <t t-foreach="invites" t-as="inv" t-key="inv.id">
                            <div class="card gi-list-card mb-3">
                                <div class="card-body p-4">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <div class="d-flex align-items-center mb-2">
                                                <div class="fw-bold" style="color: #2a5298; font-size: 1.1rem;">
                                                    <a t-att-href="'/my/guest/invites/invite/' + str(inv.id)"
                                                       style="text-decoration: none; color: #2a5298;">
                                                        <i class="fa fa-ticket-alt me-2"></i>Invitation #<t t-esc="inv.id"/>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="small text-muted mb-3">
                                                <i class="fa fa-clock me-1"></i>
                                                <t t-esc="inv.start_datetime"/> to <t t-esc="inv.end_datetime"/>
                                            </div>
                                            <div class="mb-3">
                                                <div class="gi-label mb-2">Guests</div>
                                                <t t-foreach="inv.guest_line_ids" t-as="g" t-key="g.id">
                                                    <span class="guest-badge">
                                                        <i class="fa fa-user me-1"></i><t t-esc="g.guest_name"/>
                                                    </span>
                                                </t>
                                            </div>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <div class="mb-3">
                                                <span class="badge gi-badge text-uppercase"
                                                      style="background: linear-gradient(135deg, #718096 0%, #4a5568 100%); color: white;">
                                                    <i class="fa fa-tag me-1"></i><t t-esc="inv.invite_type"/>
                                                </span>
                                            </div>
                                            <div>
                                                <span class="badge gi-badge"
                                                      t-att-style="'background: linear-gradient(135deg, ' +
                                                      ('#48bb78' if inv.state == 'active' else '#ed8936' if inv.state == 'pending' else '#a0aec0') +
                                                      ' 0%, ' +
                                                      ('#38a169' if inv.state == 'active' else '#dd6b20' if inv.state == 'pending' else '#718096') +
                                                      ' 100%); color: white;'">
                                                    <t t-if="inv.state == 'active'"><i class="fa fa-check-circle me-1"></i></t>
                                                    <t t-if="inv.state == 'pending'"><i class="fa fa-clock me-1"></i></t>
                                                    <t t-if="inv.state not in ['active', 'pending']"><i class="fa fa-times-circle me-1"></i></t>
                                                    <t t-esc="inv.state"/>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </t>
                    <t t-if="not invites">
                        <div class="empty-state">
                            <i class="fa fa-inbox fa-3x text-muted mb-3"></i>
                            <h5 class="text-muted mb-2">No Invitations Yet</h5>
                            <p class="text-muted mb-0">Create your first guest invitation using the form above</p>
                        </div>
                    </t>
                </div>
            </div>
        </t>
    </template>

    <!-- Detail page -->
    <template id="portal_guest_invite_view" name="Guest Invite Detail">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs" t-value="'My Guest Invites', '/my/guest/invites', 'Invitation Details', ''"/>

            <!-- Page-level styles -->
            <t t-set="head">
                <style>
                    body {
                        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
                        min-height: 100vh;
                    }
                    .gi-wrapper {
                        max-width: 650px;
                        margin: 0 auto;
                        padding: 1rem;
                    }
                    .gi-card {
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
                        overflow: hidden;
                    }
                    .gi-title {
                        font-weight: 600;
                        font-size: 1.5rem;
                        color: #2a5298;
                        margin: 0 0 1.5rem 0;
                        padding-bottom: 1rem;
                        border-bottom: 2px solid #e2e8f0;
                        position: relative;
                    }
                    .gi-title:after {
                        content: '';
                        position: absolute;
                        bottom: -2px;
                        left: 0;
                        width: 100px;
                        height: 2px;
                        background: linear-gradient(90deg, #2a5298, #1e3c72);
                    }
                    .gi-label {
                        font-size: 14px;
                        color: #718096;
                        font-weight: 600;
                        margin-bottom: 0.5rem;
                        display: block;
                        text-transform: uppercase;
                        letter-spacing: 0.5px;
                    }
                    .gi-badge {
                        border-radius: 20px;
                        font-size: 13px;
                        padding: 0.5rem 1rem;
                        font-weight: 500;
                        background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
                        color: white;
                    }
                    .whatsapp-share {
                        background: linear-gradient(135deg, #25D366 0%, #128C7E 100%) !important;
                        color: white !important;
                        border: none !important;
                        border-radius: 10px !important;
                        font-weight: 600;
                        padding: 1rem 2rem;
                        font-size: 16px;
                        transition: all 0.3s ease;
                        box-shadow: 0 5px 20px rgba(37, 211, 102, 0.3);
                        text-decoration: none;
                        display: block;
                        text-align: center;
                    }
                    .whatsapp-share:hover {
                        background: linear-gradient(135deg, #20BA5A 0%, #0F8C6A 100%) !important;
                        transform: translateY(-3px);
                        box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
                        color: white !important;
                    }
                    .otp-display {
                        font-size: 3rem;
                        font-weight: 700;
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                        letter-spacing: 0.5rem;
                        padding: 1.5rem;
                        border-radius: 15px;
                        border: 3px dashed #e2e8f0;
                        display: inline-block;
                        min-width: 300px;
                        text-align: center;
                    }
                    .detail-item {
                        margin-bottom: 2rem;
                        padding-bottom: 2rem;
                        border-bottom: 2px solid #e2e8f0;
                        background: #f8fafc;
                        padding: 1.5rem;
                        border-radius: 10px;
                    }
                    .detail-item:last-child {
                        border-bottom: none;
                        margin-bottom: 0;
                        padding-bottom: 0;
                    }
                    .card-body {
                        padding: 2.5rem;
                    }
                    .info-box {
                        background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
                        border: 2px solid #e2e8f0;
                        border-radius: 10px;
                        padding: 1rem;
                        margin-bottom: 1rem;
                    }
                    .back-button {
                        background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
                        border: none;
                        color: white;
                        border-radius: 8px;
                        padding: 0.875rem 2rem;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    }
                    .back-button:hover {
                        background: linear-gradient(135deg, #4a5568 0%, #718096 100%);
                        transform: translateY(-2px);
                        color: white;
                    }
                    .guest-item {
                        display: inline-flex;
                        align-items: center;
                        background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
                        color: white;
                        border-radius: 25px;
                        padding: 0.5rem 1rem;
                        margin: 0.25rem;
                        font-size: 14px;
                        font-weight: 500;
                    }
                    .guest-item i {
                        margin-right: 0.5rem;
                    }
                </style>
            </t>

            <div class="container mt-4 gi-wrapper">
                <div class="card gi-card">
                    <div class="card-body">
                        <h4 class="gi-title">
                            <i class="fa fa-file-alt me-2"></i>Invitation Details
                        </h4>

                        <!-- GUESTS -->
                        <div class="detail-item">
                            <span class="gi-label">
                                <i class="fa fa-users me-1"></i>Guests
                            </span>
                            <div class="mt-2">
                                <t t-foreach="invite.guest_line_ids" t-as="g" t-key="g.id">
                                    <div class="guest-item">
                                        <i class="fa fa-user"></i>
                                        <t t-esc="g.guest_name"/>
                                        <span class="ms-2 opacity-75">(<t t-esc="g.guest_mobile"/>)</span>
                                    </div>
                                </t>
                            </div>
                        </div>

                        <!-- VALIDITY -->
                        <div class="detail-item">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <span class="gi-label">
                                        <i class="fa fa-calendar-check me-1"></i>Valid From
                                    </span>
                                    <div class="info-box">
                                        <div style="font-weight: 600; color: #2a5298; font-size: 1.1rem;">
                                            <t t-esc="invite.start_datetime"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <span class="gi-label">
                                        <i class="fa fa-calendar-times me-1"></i>Valid Until
                                    </span>
                                    <div class="info-box">
                                        <div style="font-weight: 600; color: #2a5298; font-size: 1.1rem;">
                                            <t t-esc="invite.end_datetime"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- OTP -->
                        <div class="detail-item text-center">
                            <span class="gi-label">
                                <i class="fa fa-key me-1"></i>Entry Code / OTP
                            </span>
                            <div class="mt-3">
                                <div class="otp-display">
                                    <t t-esc="invite.otpcode"/>
                                </div>
                                <div class="text-muted mt-3">
                                    <i class="fa fa-info-circle me-1"></i>
                                    Share this code with your guest for gate entry
                                </div>
                            </div>
                        </div>

                        <!-- NOTE -->
                        <t t-if="invite.note">
                            <div class="detail-item">
                                <span class="gi-label">
                                    <i class="fa fa-sticky-note me-1"></i>Notes
                                </span>
                                <div class="info-box mt-2">
                                    <div style="color: #4a5568; font-style: italic;">
                                        <t t-esc="invite.note"/>
                                    </div>
                                </div>
                            </div>
                        </t>

                        <!-- WHATSAPP SHARE -->
                        <div class="detail-item">
                            <t t-set="base_url"
                               t-value="request.env['ir.config_parameter'].sudo().get_param('web.base.url')"/>
                            <t t-set="portal_url" t-value="base_url + '/my/guest/invites/invite/' + str(invite.id)"/>
                            <t t-set="guests"
                               t-value="', '.join([g.guest_name + ' (' + g.guest_mobile + ')' for g in invite.guest_line_ids]) if invite.guest_line_ids else 'Not specified'"/>
                            <t t-set="message"
                               t-value="'ðŸ”” GATE ENTRY INVITE%0A%0AðŸ”‘ OTP: ' + invite.otpcode + '%0AðŸ‘¤ Resident: ' + invite.resident_id.name + '%0AðŸ“… Valid: ' + invite.start_datetime.strftime('%d/%m %H:%M') + ' - ' + invite.end_datetime.strftime('%d/%m %H:%M') + '%0AðŸ‘¥ Guests: ' + guests + '%0A%0AðŸ”— Details: ' + portal_url + '%0A%0Aâœ… Show OTP at gate!'"/>
                            <t t-set="whatsapp_url" t-value="'https://web.whatsapp.com/send?text=' + message"/>

                            <a t-att-href="whatsapp_url"
                               class="whatsapp-share mb-3"
                               target="_blank"
                               rel="noopener noreferrer">
                                <i class="fa fa-whatsapp me-2"></i>
                                Share via WhatsApp Web
                            </a>
                            <div class="text-center text-muted mt-2">
                                Opens WhatsApp Web with pre-filled invitation details
                            </div>
                        </div>

                        <!-- BACK BUTTON -->
                        <div class="mt-4">
                            <a href="/my/guest/invites" class="btn back-button w-100 py-3">
                                <i class="fa fa-arrow-left me-2"></i>Back to Invitations
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </template>
</odoo>

<!--<?xml version="1.0" encoding="utf-8"?>-->
<!--<odoo>-->
<!--    &lt;!&ndash; Main page - Create + List &ndash;&gt;-->
<!--    <template id="portal_guest_invite_list" name="Guest Invites Portal List">-->
<!--        <t t-call="portal.portal_layout">-->
<!--            <t t-set="breadcrumbs" t-value="'My Guest Invites', '/my/guest/invites'"/>-->

<!--            &lt;!&ndash; Page-level styles &ndash;&gt;-->
<!--            <t t-set="head">-->
<!--                <style>-->
<!--                    .gi-wrapper { max-width: 480px; margin: 0 auto; }-->
<!--                    .gi-card { border-radius: 18px; border: none; background: linear-gradient(145deg, #fdfbff 0%,-->
<!--                    #f3f7ff 45%, #e9f7ff 100%); box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12); }-->
<!--                    .gi-card-header { border-bottom: none; background: transparent; padding-bottom: 0; }-->
<!--                    .gi-title { font-weight: 600; font-size: 20px; }-->
<!--                    .gi-tabs .nav-link { border: none; border-radius: 999px; padding: 6px 18px; font-weight: 500; color:-->
<!--                    #64748b; }-->
<!--                    .gi-tabs .nav-link.active { background: linear-gradient(135deg, #ffcf33, #ff9f1c); color: #111827;-->
<!--                    box-shadow: 0 4px 10px rgba(249, 115, 22, 0.35); }-->
<!--                    .gi-label { font-size: 13px; color: #6b7280; margin-bottom: 4px; }-->
<!--                    .gi-field { border-radius: 12px; border: 1px solid #e5e7eb; font-size: 14px; }-->
<!--                    .gi-btn-primary { border-radius: 999px; border: none; background: linear-gradient(135deg, #ffd54f,-->
<!--                    #ffb300); color: #111827; font-weight: 600; padding: 10px 16px; }-->
<!--                    .gi-btn-primary:hover { background: linear-gradient(135deg, #ffca28, #ffa000); }-->
<!--                    .gi-pill-group .btn { flex: 1 1 auto; border-radius: 999px !important; font-size: 13px; }-->
<!--                    .gi-list-card { border-radius: 14px; border: 1px solid #e5e7eb; }-->
<!--                    .gi-badge { border-radius: 999px; font-size: 11px; }-->
<!--                    .whatsapp-share { background: linear-gradient(135deg, #25D366, #128C7E) !important; color: white-->
<!--                    !important; border: none !important; border-radius: 999px !important; font-weight: 600; padding:-->
<!--                    12px 24px; font-size: 16px; box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4); }-->
<!--                    .whatsapp-share:hover { background: linear-gradient(135deg, #20BA5A, #0F8C6A) !important; transform:-->
<!--                    translateY(-2px); box-shadow: 0 8px 25px rgba(37, 211, 102, 0.5); }-->
<!--                </style>-->
<!--            </t>-->

<!--            <div class="container mt-4 o_portal_mydoc gi-wrapper">-->
<!--                &lt;!&ndash; Create card &ndash;&gt;-->
<!--                <div class="card gi-card mb-4">-->
<!--                    <div class="card-header gi-card-header">-->
<!--                        <div class="d-flex justify-content-between align-items-center">-->
<!--                            <div class="gi-title">Guest PreApproval</div>-->
<!--                        </div>-->
<!--                        <ul class="nav nav-tabs gi-tabs mt-3" id="inviteTab" role="tablist">-->
<!--                            <li class="nav-item">-->
<!--                                <a class="nav-link active" id="once-tab" data-bs-toggle="tab" href="#once-pane"-->
<!--                                   role="tab" aria-controls="once-pane" aria-selected="true">Once-->
<!--                                </a>-->
<!--                            </li>-->
<!--                            <li class="nav-item ms-2">-->
<!--                                <a class="nav-link" id="freq-tab" data-bs-toggle="tab" href="#freq-pane" role="tab"-->
<!--                                   aria-controls="freq-pane" aria-selected="false">Frequently-->
<!--                                </a>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </div>-->
<!--                    <div class="card-body pt-3">-->
<!--                        <div class="tab-content" id="inviteTabContent">-->
<!--                            &lt;!&ndash; Once tab &ndash;&gt;-->
<!--                            <div class="tab-pane fade show active" id="once-pane" role="tabpanel"-->
<!--                                 aria-labelledby="once-tab">-->
<!--                                <form method="POST" action="/my/guest/invites">-->
<!--                                    <input type="hidden" name="invitetype" value="once"/>-->
<!--                                    <div class="border rounded-3 p-3 mb-3 bg-white">-->
<!--                                        <div class="form-check">-->
<!--                                            <input class="form-check-input" type="checkbox" name="isprivate"-->
<!--                                                   id="onceprivate"/>-->
<!--                                            <label class="form-check-label fw-semibold" for="onceprivate">Make it-->
<!--                                                private-->
<!--                                            </label>-->
<!--                                        </div>-->
<!--                                        <div class="text-muted small mt-1">This allows silent entries of your guests-->
<!--                                            without disturbing others.-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Select Date</label>-->
<!--                                        <input type="date" name="oncedate" class="form-control gi-field"-->
<!--                                               required="required"/>-->
<!--                                    </div>-->
<!--                                    <div class="row mb-3">-->
<!--                                        <div class="col-6">-->
<!--                                            <label class="gi-label">Starting from</label>-->
<!--                                            <input type="time" name="oncestarttime" class="form-control gi-field"/>-->
<!--                                        </div>-->
<!--                                        <div class="col-6">-->
<!--                                            <label class="gi-label">Valid for</label>-->
<!--                                            <select name="oncevalidhours" class="form-select gi-field">-->
<!--                                                <option value="2">2 Hours</option>-->
<!--                                                <option value="4">4 Hours</option>-->
<!--                                                <option value="8" selected="selected">8 Hours</option>-->
<!--                                                <option value="12">12 Hours</option>-->
<!--                                                <option value="24">24 Hours</option>-->
<!--                                            </select>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="mb-2">-->
<!--                                        <label class="gi-label">Guest Name</label>-->
<!--                                        <input type="text" name="guestname" class="form-control gi-field"-->
<!--                                               required="required"/>-->
<!--                                    </div>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Guest Mobile</label>-->
<!--                                        <input type="text" name="guestmobile" class="form-control gi-field"-->
<!--                                               required="required"/>-->
<!--                                    </div>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Note</label>-->
<!--                                        <textarea name="note" class="form-control gi-field" rows="2"></textarea>-->
<!--                                    </div>-->
<!--                                    <button type="submit" class="btn gi-btn-primary w-100">Submit</button>-->
<!--                                </form>-->
<!--                            </div>-->

<!--                            &lt;!&ndash; Frequently tab &ndash;&gt;-->
<!--                            <div class="tab-pane fade" id="freq-pane" role="tabpanel" aria-labelledby="freq-tab">-->
<!--                                <form method="POST" action="/my/guest/invites">-->
<!--                                    <input type="hidden" name="invitetype" value="frequent"/>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Allow entry for next</label>-->
<!--                                        <div class="btn-group gi-pill-group w-100" role="group">-->
<!--                                            <input type="radio" class="btn-check" name="durationtype" id="freq1w"-->
<!--                                                   value="1w" autocomplete="off"/>-->
<!--                                            <label class="btn btn-outline-primary" for="freq1w">1 week</label>-->
<!--                                            <input type="radio" class="btn-check" name="durationtype" id="freq1m"-->
<!--                                                   value="1m" autocomplete="off" checked="checked"/>-->
<!--                                            <label class="btn btn-outline-primary" for="freq1m">1 month</label>-->
<!--                                            <input type="radio" class="btn-check" name="durationtype" id="freqgt1m"-->
<!--                                                   value="gt1m" autocomplete="off"/>-->
<!--                                            <label class="btn btn-outline-primary" for="freqgt1m">&gt;1 month</label>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="row mb-3">-->
<!--                                        <div class="col-6">-->
<!--                                            <label class="gi-label">Start date</label>-->
<!--                                            <input type="date" name="freqstartdate" class="form-control gi-field"/>-->
<!--                                        </div>-->
<!--                                        <div class="col-6">-->
<!--                                            <label class="gi-label">End date (optional)</label>-->
<!--                                            <input type="date" name="freqenddate" class="form-control gi-field"/>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="mb-2">-->
<!--                                        <label class="gi-label">Guest Name</label>-->
<!--                                        <input type="text" name="guestname" class="form-control gi-field"-->
<!--                                               required="required"/>-->
<!--                                    </div>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Guest Mobile</label>-->
<!--                                        <input type="text" name="guestmobile" class="form-control gi-field"-->
<!--                                               required="required"/>-->
<!--                                    </div>-->
<!--                                    <div class="mb-3">-->
<!--                                        <label class="gi-label">Note</label>-->
<!--                                        <textarea name="note" class="form-control gi-field" rows="2"></textarea>-->
<!--                                    </div>-->
<!--                                    <button type="submit" class="btn gi-btn-primary w-100">Submit</button>-->
<!--                                </form>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; Existing invites list &ndash;&gt;-->
<!--                <div class="mt-4">-->
<!--                    <h5 class="mb-3">Your Invites</h5>-->
<!--                    <t t-if="invites">-->
<!--                        <t t-foreach="invites" t-as="inv" t-key="inv.id">-->
<!--                            <div class="card gi-list-card mb-2">-->
<!--                                <div class="card-body py-2 px-3 d-flex justify-content-between align-items-center">-->
<!--                                    <div>-->
<!--                                        <div class="fw-semibold">-->
<!--                                            <a t-att-href="'/my/guest/invites/invite/' + str(inv.id)">Invite #-->
<!--                                                <t t-esc="inv.id"/>-->
<!--                                            </a>-->
<!--                                        </div>-->
<!--                                        <div class="small text-muted">-->
<!--                                            <t t-esc="inv.start_datetime"/>-->
<!--                                            to-->
<!--                                            <t t-esc="inv.end_datetime"/>-->
<!--                                        </div>-->
<!--                                        <div class="small mt-1">-->
<!--                                            <t t-foreach="inv.guest_line_ids" t-as="g" t-key="g.id">-->
<!--                                                <span class="badge bg-secondary gi-badge">-->
<!--                                                    <t t-esc="g.guest_name"/>-->
<!--                                                </span>-->
<!--                                            </t>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <div class="text-end">-->
<!--                                        <span class="badge bg-light text-dark gi-badge text-uppercase">-->
<!--                                            <t t-esc="inv.invite_type"/>-->
<!--                                        </span>-->
<!--                                        <br/>-->
<!--                                        <span class="badge bg-primary text-white gi-badge mt-1">-->
<!--                                            <t t-esc="inv.state"/>-->
<!--                                        </span>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </t>-->
<!--                    </t>-->
<!--                    <t t-if="not invites">-->
<!--                        <div class="text-center text-muted small">No guest invites yet.</div>-->
<!--                    </t>-->
<!--                </div>-->
<!--            </div>-->
<!--        </t>-->
<!--    </template>-->

<!--    &lt;!&ndash; Detail page &ndash;&gt;-->
<!--    <template id="portal_guest_invite_view" name="Guest Invite Detail">-->
<!--        <t t-call="portal.portal_layout">-->
<!--            <t t-set="breadcrumbs" t-value="'My Guest Invites', '/my/guest/invites', 'Invite', ''"/>-->

<!--            &lt;!&ndash; Page-level styles &ndash;&gt;-->
<!--            <t t-set="head">-->
<!--                <style>-->
<!--                    .gi-wrapper { max-width: 480px; margin: 0 auto; }-->
<!--                    .gi-card { border-radius: 18px; border: none; background: linear-gradient(145deg, #fdfbff 0%,-->
<!--                    #f3f7ff 45%, #e9f7ff 100%); box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12); }-->
<!--                    .gi-title { font-weight: 600; font-size: 20px; }-->
<!--                    .gi-label { font-size: 13px; color: #6b7280; margin-bottom: 4px; }-->
<!--                    .gi-badge { border-radius: 999px; font-size: 11px; }-->
<!--                    .whatsapp-share { background: linear-gradient(135deg, #25D366, #128C7E) !important; color: white-->
<!--                    !important; border: none !important; border-radius: 999px !important; font-weight: 600; padding:-->
<!--                    14px 28px; font-size: 16px; box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4); width: 100%;-->
<!--                    text-decoration: none; display: block; text-align: center; transition: all 0.3s ease; }-->
<!--                    .whatsapp-share:hover { background: linear-gradient(135deg, #20BA5A, #0F8C6A) !important; transform:-->
<!--                    translateY(-2px); box-shadow: 0 8px 25px rgba(37, 211, 102, 0.5); color: white !important; }-->
<!--                    .otp-display { font-size: 2.5em; font-weight: bold; color: #10B981; background:-->
<!--                    linear-gradient(135deg, #10B981, #059669); -webkit-background-clip: text; -webkit-text-fill-color:-->
<!--                    transparent; background-clip: text; }-->
<!--                </style>-->
<!--            </t>-->

<!--            <div class="container mt-4 gi-wrapper">-->
<!--                <div class="card gi-card">-->
<!--                    <div class="card-body">-->
<!--                        <h4 class="gi-title mb-3">Invite Details</h4>-->

<!--                        &lt;!&ndash; GUESTS &ndash;&gt;-->
<!--                        <p class="mb-2">-->
<!--                            <span class="gi-label d-block">Guests</span>-->
<!--                            <t t-foreach="invite.guest_line_ids" t-as="g" t-key="g.id">-->
<!--                                <span class="badge bg-secondary gi-badge">-->
<!--                                    <t t-esc="g.guest_name"/>-->
<!--                                    (<t t-esc="g.guest_mobile"/>)-->
<!--                                </span>-->
<!--                            </t>-->
<!--                        </p>-->

<!--                        &lt;!&ndash; VALIDITY &ndash;&gt;-->
<!--                        <p class="mb-2">-->
<!--                            <span class="gi-label d-block">Valid from</span>-->
<!--                            <strong>-->
<!--                                <t t-esc="invite.start_datetime"/>-->
<!--                            </strong>-->
<!--                        </p>-->
<!--                        <p class="mb-2">-->
<!--                            <span class="gi-label d-block">To</span>-->
<!--                            <strong>-->
<!--                                <t t-esc="invite.end_datetime"/>-->
<!--                            </strong>-->
<!--                        </p>-->

<!--                        &lt;!&ndash; OTP - BIG DISPLAY &ndash;&gt;-->
<!--                        <p class="mb-4 text-center">-->
<!--                            <span class="gi-label d-block mb-2">Entry Code / OTP</span>-->
<!--                            <span class="otp-display">-->
<!--                                <t t-esc="invite.otpcode"/>-->
<!--                            </span>-->
<!--                        </p>-->

<!--                        &lt;!&ndash; NOTE &ndash;&gt;-->
<!--                        <t t-if="invite.note">-->
<!--                            <p class="mb-4">-->
<!--                                <span class="gi-label d-block">Note</span>-->
<!--                                <t t-esc="invite.note"/>-->
<!--                            </p>-->
<!--                        </t>-->
<!--                        &lt;!&ndash; ðŸ”¥ DIRECT WHATSAPP WEB - NO CONTROLLER NEEDED &ndash;&gt;-->
<!--                        <div class="text-center mb-4">-->
<!--                            <t t-set="base_url"-->
<!--                               t-value="request.env['ir.config_parameter'].sudo().get_param('web.base.url')"/>-->
<!--                            <t t-set="portal_url" t-value="base_url + '/my/guest/invites/invite/' + str(invite.id)"/>-->
<!--                            <t t-set="guests"-->
<!--                               t-value="', '.join([g.guest_name + ' (' + g.guest_mobile + ')' for g in invite.guest_line_ids]) if invite.guest_line_ids else 'Not specified'"/>-->
<!--                            <t t-set="message"-->
<!--                               t-value="'ðŸ”” GATE ENTRY INVITE%0A%0AðŸ”‘ OTP: ' + invite.otpcode + '%0AðŸ‘¤ Resident: ' + invite.resident_id.name + '%0AðŸ“… Valid: ' + invite.start_datetime.strftime('%d/%m %H:%M') + ' - ' + invite.end_datetime.strftime('%d/%m %H:%M') + '%0AðŸ‘¥ Guests: ' + guests + '%0A%0AðŸ”— Details: ' + portal_url + '%0A%0Aâœ… Show OTP at gate!'"/>-->
<!--                            <t t-set="whatsapp_url" t-value="'https://web.whatsapp.com/send?text=' + message"/>-->

<!--                            <a t-att-href="whatsapp_url"-->
<!--                               class="whatsapp-share btn btn-lg w-100"-->
<!--                               target="_blank"-->
<!--                               rel="noopener noreferrer">-->
<!--                                <i class="fa fa-whatsapp me-2"></i>-->
<!--                                ðŸ“± Share via WhatsApp-->
<!--                            </a>-->
<!--                            <div class="mt-3 small text-muted">-->
<!--                                Opens WhatsApp Web instantly with pre-filled message-->
<!--                            </div>-->
<!--                        </div>-->


<!--                        &lt;!&ndash; BACK BUTTON &ndash;&gt;-->
<!--                        <a href="/my/guest/invites" class="btn btn-outline-secondary w-100">â† Back to Invites</a>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </t>-->
<!--    </template>-->
<!--</odoo>-->
