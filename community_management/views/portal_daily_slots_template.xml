<odoo>
    <template id="portal_daily_slots_template" name="Daily Slots Portal">
        <t t-call="website.layout">
            <!-- Enhanced background styling -->
            <t t-set="head">
                <style>
                    body {
                        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                        min-height: 100vh;
                    }
                    .main-container {
                        max-width: 1200px;
                        margin: 0 auto;
                        padding: 2rem 1rem;
                    }
                    .search-card {
                        border-radius: 12px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
                        overflow: hidden;
                        margin-bottom: 2rem;
                    }
                    .search-header {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        color: white;
                        padding: 1.5rem;
                        border-radius: 12px 12px 0 0;
                    }
                    .search-header h5 {
                        font-weight: 600;
                        margin: 0;
                        display: flex;
                        align-items: center;
                    }
                    .search-header h5 i {
                        margin-right: 10px;
                        background: rgba(255, 255, 255, 0.2);
                        padding: 8px;
                        border-radius: 8px;
                    }
                    .form-label {
                        font-weight: 600;
                        color: #4a5568;
                        margin-bottom: 0.5rem;
                        font-size: 14px;
                    }
                    .form-control {
                        border-radius: 8px;
                        border: 2px solid #e2e8f0;
                        padding: 0.75rem 1rem;
                        font-size: 15px;
                        transition: all 0.3s ease;
                        background: #f8fafc;
                    }
                    .form-control:focus {
                        border-color: #2a5298;
                        box-shadow: 0 0 0 3px rgba(42, 82, 152, 0.1);
                        background: white;
                    }
                    .btn-search {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        border: none;
                        color: white;
                        font-weight: 600;
                        border-radius: 8px;
                        padding: 0.875rem 1.5rem;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 15px rgba(42, 82, 152, 0.3);
                        width: 100%;
                    }
                    .btn-search:hover {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 20px rgba(42, 82, 152, 0.4);
                    }
                    .results-info {
                        background: linear-gradient(135deg, #4299e1 0%, #3182ce 100%);
                        color: white;
                        border-radius: 10px;
                        padding: 1rem 1.5rem;
                        margin-bottom: 2rem;
                        border: none;
                    }
                    .results-badge {
                        background: rgba(255, 255, 255, 0.2);
                        color: white;
                        border-radius: 20px;
                        padding: 0.25rem 1rem;
                        font-size: 14px;
                        margin-left: 10px;
                    }
                    .availability-header {
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        color: white;
                        border-radius: 12px;
                        padding: 1.5rem;
                        margin-bottom: 2rem;
                        border: none;
                    }
                    .availability-header h4 {
                        font-weight: 600;
                        margin: 0 0 0.5rem 0;
                    }
                    .availability-header small {
                        opacity: 0.9;
                    }
                    .worker-card {
                        border-radius: 12px;
                        border: 2px solid #e2e8f0;
                        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.05);
                        transition: all 0.3s ease;
                        height: 100%;
                        position: relative;
                        overflow: hidden;
                    }
                    .worker-card:hover {
                        transform: translateY(-5px);
                        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
                        border-color: #2a5298;
                    }
                    .worker-card:before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 4px;
                        background: linear-gradient(90deg, #10b981, #059669);
                    }
                    .card-header-success {
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        color: white;
                        padding: 1.25rem;
                        border-radius: 12px 12px 0 0;
                        border: none;
                    }
                    .card-header-success h5 {
                        font-weight: 600;
                        margin: 0;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                    }
                    .category-badge {
                        background: rgba(255, 255, 255, 0.2);
                        color: white;
                        border-radius: 20px;
                        padding: 0.25rem 0.75rem;
                        font-size: 12px;
                        font-weight: 500;
                    }
                    .slot-list {
                        background: #f8fafc;
                        border-radius: 8px;
                        margin: 1rem 0;
                        border: 2px solid #e2e8f0;
                    }
                    .slot-item {
                        background: white;
                        border: none;
                        border-bottom: 2px solid #e2e8f0;
                        padding: 1rem;
                        transition: all 0.3s ease;
                    }
                    .slot-item:last-child {
                        border-bottom: none;
                    }
                    .slot-item:hover {
                        background: #f1f5f9;
                    }
                    .slot-checkbox .form-check-input {
                        border: 2px solid #e2e8f0;
                        width: 1.2em;
                        height: 1.2em;
                        margin-top: 0.2em;
                    }
                    .slot-checkbox .form-check-input:checked {
                        background-color: #10b981;
                        border-color: #10b981;
                    }
                    .slot-checkbox .form-check-label {
                        font-weight: 600;
                        color: #2d3748;
                    }
                    .slot-notes {
                        color: #718096;
                        font-size: 13px;
                        margin-top: 0.25rem;
                        font-style: italic;
                    }
                    .btn-book {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        border: none;
                        color: white;
                        font-weight: 600;
                        border-radius: 8px;
                        padding: 0.5rem 1.25rem;
                        font-size: 14px;
                        transition: all 0.3s ease;
                        box-shadow: 0 4px 10px rgba(42, 82, 152, 0.3);
                    }
                    .btn-book:hover {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        transform: translateY(-2px);
                        box-shadow: 0 6px 15px rgba(42, 82, 152, 0.4);
                    }
                    .empty-state {
                        background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
                        border: 3px dashed #cbd5e0;
                        border-radius: 12px;
                        padding: 3rem 2rem;
                        text-align: center;
                    }
                    .empty-state h4 {
                        color: #4a5568;
                        font-weight: 600;
                        margin-bottom: 1rem;
                    }
                    .info-icon {
                        font-size: 3rem;
                        color: #a0aec0;
                        margin-bottom: 1rem;
                        opacity: 0.5;
                    }
                </style>
            </t>

            <div class="main-container">
                <!-- üîç SEARCH FORM -->
                <div class="search-card">
                    <div class="search-header">
                        <h5><i class="fa fa-search"></i> Search Available Slots</h5>
                    </div>
                    <div class="card-body p-4">
                        <form method="GET" class="row g-3">
                            <div class="col-md-5">
                                <label class="form-label">Worker Name</label>
                                <input type="text" class="form-control"
                                       name="search_name"
                                       placeholder="e.g. Ramu, Sita..."
                                       t-att-value="search_name or ''"/>
                            </div>
                            <div class="col-md-5">
                                <label class="form-label">Category</label>
                                <input type="text" class="form-control"
                                       name="search_category"
                                       placeholder="e.g. Maid, Cook, Driver..."
                                       t-att-value="search_category or ''"/>
                            </div>
                            <div class="col-md-2 d-flex align-items-end">
                                <button type="submit" class="btn-search">
                                    <i class="fa fa-search"></i> Search
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- üîç Results counter -->
                <div class="results-info">
                    <div class="d-flex justify-content-between align-items-center">
                        <strong>
                            <t t-esc="len(slots_data)"/> workers available
                        </strong>
                        <t t-if="search_name or search_category">
                            <span class="results-badge">
                                <t t-if="search_name">Name: <t t-esc="search_name"/></t>
                                <t t-if="search_category"> | Category: <t t-esc="search_category"/></t>
                            </span>
                        </t>
                    </div>
                </div>

                <!-- üìÖ Available Time Slots Header -->
                <div class="availability-header">
                    <h4>üìÖ Available Time Slots</h4>
                    <small>Click "Book Now" to reserve your preferred time</small>
                </div>

                <!-- Workers and Slots Grid -->
                <div class="row">
                    <t t-foreach="slots_data" t-as="data">
                        <div class="col-lg-4 col-md-6 mb-4">
                            <div class="worker-card">
                                <div class="card-header-success">
                                    <h5 class="mb-0">
                                        <t t-esc="data['contact'].name"/>
                                        <span class="category-badge">
                                            <t t-esc="data['contact'].category_custom_id.name"/>
                                        </span>
                                    </h5>
                                </div>
                                <div class="card-body p-4">
                                    <div class="mb-3">
                                        <p class="mb-2">
                                            <i class="fa fa-phone me-2 text-primary"></i>
                                            <strong>Phone:</strong> <t t-esc="data['contact'].mobile or 'N/A'"/>
                                        </p>
                                        <p class="mb-0">
                                            <i class="fa fa-envelope me-2 text-primary"></i>
                                            <strong>Email:</strong> <t t-esc="data['contact'].email or 'N/A'"/>
                                        </p>
                                    </div>

                                    <h6 class="mt-4 mb-3" style="color: #2a5298; font-weight: 600;">
                                        <i class="fa fa-clock me-2"></i>Available Slots
                                    </h6>
                                    <div class="slot-list">
                                        <t t-foreach="data['slots']" t-as="slot">
                                            <div class="slot-item">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <!-- Slot information -->
                                                    <div>
                                                        <div class="slot-checkbox form-check">
                                                            <input class="form-check-input" type="checkbox"
                                                                   t-att-checked="'checked'" disabled="disabled"/>
                                                            <label class="form-check-label">
                                                                <t t-esc="slot.start_time"/> - <t t-esc="slot.end_time"/>
                                                            </label>
                                                        </div>
                                                        <t t-if="slot.notes">
                                                            <div class="slot-notes">
                                                                (<t t-esc="slot.notes"/>)
                                                            </div>
                                                        </t>
                                                    </div>

                                                    <!-- Book button -->
                                                    <form t-att-action="'/my/book_slot/' + str(slot.id)"
                                                          method="POST" style="display: contents;">
                                                        <button type="submit" class="btn-book">
                                                            <i class="fa fa-calendar-check-o me-1"></i> Book Now
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </t>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>

                <!-- Empty state -->
                <t t-if="not slots_data">
                    <div class="empty-state">
                        <div class="info-icon">
                            <i class="fa fa-calendar-times"></i>
                        </div>
                        <h4>No available slots right now</h4>
                        <p class="text-muted mb-0">
                            <t t-if="search_name or search_category">
                                Try different search terms or check back later.
                            </t>
                            <t t-else="">
                                All slots are currently booked. Please check back later or contact the administrator.
                            </t>
                        </p>
                    </div>
                </t>
            </div>
        </t>
    </template>

    <!-- Booking Success Template -->
    <template id="portal_booking_success" name="Booking Success">
        <t t-call="website.layout">
            <t t-set="head">
                <style>
                    body {
                        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
                        min-height: 100vh;
                    }
                    .success-container {
                        max-width: 800px;
                        margin: 0 auto;
                        padding: 4rem 1rem;
                    }
                    .success-card {
                        border-radius: 16px;
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
                        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
                        padding: 3rem;
                        text-align: center;
                        position: relative;
                        overflow: hidden;
                    }
                    .success-card:before {
                        content: '';
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 6px;
                        background: linear-gradient(90deg, #10b981, #059669);
                    }
                    .success-icon {
                        font-size: 4rem;
                        background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                        -webkit-background-clip: text;
                        -webkit-text-fill-color: transparent;
                        background-clip: text;
                        margin-bottom: 1.5rem;
                    }
                    .success-card h4 {
                        color: #2a5298;
                        font-weight: 600;
                        margin-bottom: 1rem;
                    }
                    .success-card p {
                        color: #718096;
                        font-size: 1.1rem;
                        line-height: 1.6;
                        margin-bottom: 2rem;
                    }
                    .btn-view-slots {
                        background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
                        border: none;
                        color: white;
                        font-weight: 600;
                        border-radius: 10px;
                        padding: 1rem 2.5rem;
                        font-size: 1.1rem;
                        transition: all 0.3s ease;
                        box-shadow: 0 6px 20px rgba(42, 82, 152, 0.3);
                    }
                    .btn-view-slots:hover {
                        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                        transform: translateY(-3px);
                        box-shadow: 0 10px 25px rgba(42, 82, 152, 0.4);
                        color: white;
                    }
                </style>
            </t>

            <div class="success-container">
                <div class="success-card">
                    <div class="success-icon">
                        <i class="fa fa-check-circle"></i>
                    </div>
                    <h4>Slot Booked Successfully!</h4>
                    <p>Your booking is confirmed and has been removed from available slots.</p>
                    <a href="/my/daily_slots" class="btn-view-slots">
                        <i class="fa fa-list me-2"></i> View Available Slots
                    </a>
                </div>
            </div>
        </t>
    </template>
</odoo>

<!--&lt;!&ndash; portal_daily_slots_template.xml [file:8a368325-e7ab-4715-8133-7e40d71d63ad] - SEARCH ADDED &ndash;&gt;-->
<!--<odoo>-->
<!--    <template id="portal_daily_slots_template" name="Daily Slots Portal">-->
<!--        <t t-call="website.layout">-->
<!--            <div class="container mt-4">-->
<!--                &lt;!&ndash; üîç NEW SEARCH FORM (Added at top - your code untouched below) &ndash;&gt;-->
<!--                <div class="card mb-4 shadow-sm">-->
<!--                    <div class="card-header bg-primary text-white">-->
<!--                        <h5><i class="fa fa-search"></i> Search Available Slots</h5>-->
<!--                    </div>-->
<!--                    <div class="card-body">-->
<!--                        <form method="GET" class="row g-3">-->
<!--                            <div class="col-md-5">-->
<!--                                <label class="form-label fw-bold">Worker Name</label>-->
<!--                                <input type="text" class="form-control"-->
<!--                                       name="search_name"-->
<!--                                       placeholder="e.g. Ramu, Sita..."-->
<!--                                       t-att-value="search_name or ''"/>-->
<!--                            </div>-->
<!--                            <div class="col-md-5">-->
<!--                                <label class="form-label fw-bold">Category</label>-->
<!--                                <input type="text" class="form-control"-->
<!--                                       name="search_category"-->
<!--                                       placeholder="e.g. Maid, Cook, Driver..."-->
<!--                                       t-att-value="search_category or ''"/>-->
<!--                            </div>-->
<!--                            <div class="col-md-2 d-flex align-items-end">-->
<!--                                <button type="submit" class="btn btn-success w-100">-->
<!--                                    <i class="fa fa-search"></i> Search-->
<!--                                </button>-->
<!--                            </div>-->
<!--                        </form>-->
<!--                    </div>-->
<!--                </div>-->

<!--                &lt;!&ndash; üîç NEW: Results counter &ndash;&gt;-->
<!--                <div class="alert alert-info mb-4">-->
<!--                    <strong><t t-esc="len(slots_data)"/> workers available</strong>-->
<!--                    <t t-if="search_name or search_category">-->
<!--                        <span class="badge badge-primary ms-2">-->
<!--                            <t t-if="search_name">Name: <t t-esc="search_name"/></t>-->
<!--                            <t t-if="search_category"> | Category: <t t-esc="search_category"/></t>-->
<!--                        </span>-->
<!--                    </t>-->
<!--                </div>-->

<!--                &lt;!&ndash; YOUR EXISTING CODE (100% UNCHANGED FROM HERE) &ndash;&gt;-->
<!--                <div class="alert alert-info">-->
<!--                    <h4>üìÖ Available Time Slots</h4>-->
<!--                    <small class="text-muted">Click "Book Now" to reserve</small>-->
<!--                </div>-->

<!--                <div class="row">-->
<!--                    <t t-foreach="slots_data" t-as="data">-->
<!--                        <div class="col-lg-4 col-md-6 mb-4">-->
<!--                            <div class="card border-success shadow-sm h-100">-->
<!--                                <div class="card-header bg-success text-white">-->
<!--                                    <h5 class="mb-0">-->
<!--                                        <t t-esc="data['contact'].name"/>-->
<!--                                        <span class="badge badge-light ml-2">-->
<!--                                            <t t-esc="data['contact'].category_custom_id.name"/>-->
<!--                                        </span>-->
<!--                                    </h5>-->
<!--                                </div>-->
<!--                                <div class="card-body">-->
<!--                                    <p><strong>üì±</strong> <t t-esc="data['contact'].mobile or 'N/A'"/></p>-->
<!--                                    <p><strong>‚úâÔ∏è</strong> <t t-esc="data['contact'].email or 'N/A'"/></p>-->

<!--                                    <h6 class="mt-3">Available Slots:</h6>-->
<!--                                    <div class="list-group list-group-flush">-->
<!--                                        <t t-foreach="data['slots']" t-as="slot">-->
<!--                                            <div class="list-group-item px-3 py-2">-->
<!--                                                <div class="d-flex justify-content-between align-items-center">-->
<!--                                                    &lt;!&ndash; Visual checkbox (no function) &ndash;&gt;-->
<!--                                                    <div>-->
<!--                                                        <div class="form-check">-->
<!--                                                            <input class="form-check-input" type="checkbox"-->
<!--                                                                   t-att-checked="'checked'" disabled="disabled"/>-->
<!--                                                            <label class="form-check-label fw-bold">-->
<!--                                                                <t t-esc="slot.start_time"/> - <t t-esc="slot.end_time"/>-->
<!--                                                            </label>-->
<!--                                                        </div>-->
<!--                                                        <t t-if="slot.notes">-->
<!--                                                            <small class="text-muted d-block">(<t t-esc="slot.notes"/>)</small>-->
<!--                                                        </t>-->
<!--                                                    </div>-->

<!--                                                    &lt;!&ndash; SIMPLE FORM - NO CSRF NEEDED &ndash;&gt;-->
<!--                                                    <form t-att-action="'/my/book_slot/' + str(slot.id)"-->
<!--                                                          method="POST" style="display: contents;">-->
<!--                                                        <button type="submit" class="btn btn-sm btn-success">-->
<!--                                                            <i class="fa fa-calendar-check-o"></i> Book Now-->
<!--                                                        </button>-->
<!--                                                    </form>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </t>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </t>-->
<!--                </div>-->

<!--                <t t-if="not slots_data">-->
<!--                    <div class="alert alert-warning text-center">-->
<!--                        <h4>üòî No available slots right now</h4>-->
<!--                        <t t-if="search_name or search_category">-->
<!--                            <p>Try different search terms.</p>-->
<!--                        </t>-->
<!--                        <t t-else="">-->
<!--                            <p>Check back later or contact admin.</p>-->
<!--                        </t>-->
<!--                    </div>-->
<!--                </t>-->
<!--            </div>-->
<!--        </t>-->
<!--    </template>-->

<!--    &lt;!&ndash; YOUR EXISTING SUCCESS TEMPLATE (unchanged) &ndash;&gt;-->
<!--    <template id="portal_booking_success" name="Booking Success">-->
<!--        <t t-call="website.layout">-->
<!--            <div class="container mt-5">-->
<!--                <div class="row justify-content-center">-->
<!--                    <div class="col-md-8 text-center">-->
<!--                        <div class="alert alert-success">-->
<!--                            <h2>‚úÖ <i class="fa fa-check-circle"></i></h2>-->
<!--                            <h4>Slot Booked Successfully!</h4>-->
<!--                            <p class="lead">Your booking is confirmed and removed from available slots.</p>-->
<!--                            <a href="/my/daily_slots" class="btn btn-success btn-lg">-->
<!--                                <i class="fa fa-list"></i> View Available Slots-->
<!--                            </a>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </t>-->
<!--    </template>-->
<!--</odoo>-->

